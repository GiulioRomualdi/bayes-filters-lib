\hypertarget{namespacebfl_1_1utils}{}\doxysection{bfl\+::utils Namespace Reference}
\label{namespacebfl_1_1utils}\index{bfl::utils@{bfl::utils}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classbfl_1_1utils_1_1CpuTimer}{Cpu\+Timer}}
\begin{DoxyCompactList}\small\item\em This template class provides methods to keep track of time. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$bool B, class T  = void$>$ }\\using \mbox{\hyperlink{namespacebfl_1_1utils_aeeda6c71bf3bcd56a07707571c857c57}{enable\+\_\+if\+\_\+t}} = typename std\+::enable\+\_\+if$<$ B, T $>$\+::type
\begin{DoxyCompactList}\small\item\em Helper type \textquotesingle{}enable\+\_\+if\+\_\+t\textquotesingle{}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T , typename ... Args$>$ }\\std\+::unique\+\_\+ptr$<$ T $>$ \mbox{\hyperlink{namespacebfl_1_1utils_ad9e9288a23debabef8314ac0d1006e66}{make\+\_\+unique}} (Args \&\&...args)
\begin{DoxyCompactList}\small\item\em Constructs an object of type T and wraps it in a std\+::unique\+\_\+ptr. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived $>$ }\\double \mbox{\hyperlink{namespacebfl_1_1utils_a6ca41188b9a6ef3d0d5d5c62df6ed318}{log\+\_\+sum\+\_\+exp}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&data)
\begin{DoxyCompactList}\small\item\em Return the element-\/wise logarithm of the sum of exponentials of the input data. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived , typename Derived\+Scalar  = typename Derived\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value, bool $>$  = true$>$ }\\Eigen\+::\+Matrix$<$ Derived\+Scalar, 3, Eigen\+::\+Dynamic $>$ \mbox{\hyperlink{namespacebfl_1_1utils_a294bdf526be6ef1c5bad59e737f2af63}{quaternion\+\_\+to\+\_\+rotation\+\_\+vector}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&quaternion)
\begin{DoxyCompactList}\small\item\em Convert a matrix of unit quaternions $ q_i $ to their rotation vector representation $ r_i \in \mathbb{R}^{3} $ in the tangent space at the identity. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived , typename Derived\+Scalar  = typename Derived\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value, bool $>$  = true$>$ }\\Eigen\+::\+Matrix$<$ Derived\+Scalar, 4, Eigen\+::\+Dynamic $>$ \mbox{\hyperlink{namespacebfl_1_1utils_af901548c98d811c2b176e1d9b02aabb3}{rotation\+\_\+vector\+\_\+to\+\_\+quaternion}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&rotation\+\_\+vector)
\begin{DoxyCompactList}\small\item\em Convert a matrix of rotation vectors $ r_i \in \mathbb{R}^{3} $ in the tangent space at the identity to their unitary quaternionic representation $ q_i $. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived , typename Derived\+Arg2 , typename Derived\+Scalar  = typename Derived\+::\+Scalar, typename Derived\+Arg2\+Scalar  = typename Derived\+Arg2\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value \&\&std\+::is\+\_\+same$<$ Derived\+Scalar, Derived\+Arg2\+Scalar $>$\+::value, bool $>$  = true$>$ }\\Eigen\+::\+Matrix$<$ Derived\+Scalar, 4, Eigen\+::\+Dynamic $>$ \mbox{\hyperlink{namespacebfl_1_1utils_ab1ca09c6f5d699242615c8dbc89fa2e0}{sum\+\_\+quaternion\+\_\+rotation\+\_\+vector}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&quaternion, const Eigen\+::\+Matrix\+Base$<$ Derived\+Arg2 $>$ \&rotation\+\_\+vector)
\begin{DoxyCompactList}\small\item\em Evaluate the colwise sum between a unit quaternion $ q $ and a set of rotation vectors $ r_i \in \mathbb{R}^{3} $ in the tangent space at the identity. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived , typename Derived\+Arg2 , typename Derived\+Scalar  = typename Derived\+::\+Scalar, typename Derived\+Arg2\+Scalar  = typename Derived\+Arg2\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value \&\&std\+::is\+\_\+same$<$ Derived\+Scalar, Derived\+Arg2\+Scalar $>$\+::value, bool $>$  = true$>$ }\\Eigen\+::\+Matrix$<$ Derived\+Scalar, 3, Eigen\+::\+Dynamic $>$ \mbox{\hyperlink{namespacebfl_1_1utils_a26bbb191de2e28c267c505a1e9ef0951}{diff\+\_\+quaternion}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&quaternion\+\_\+left, const Eigen\+::\+Matrix\+Base$<$ Derived\+Arg2 $>$ \&quaternion\+\_\+right)
\begin{DoxyCompactList}\small\item\em Evaluate the colwise difference between a set of unit quaternions $ q_i $ and a unit quaternion $ q $. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived , typename Derived\+Arg2 , typename Derived\+Scalar  = typename Derived\+::\+Scalar, typename Derived\+Arg2\+Scalar  = typename Derived\+Arg2\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value \&\&std\+::is\+\_\+same$<$ Derived\+Scalar, Derived\+Arg2\+Scalar $>$\+::value, bool $>$  = true$>$ }\\Eigen\+::\+Matrix$<$ Derived\+Scalar, 4, 1 $>$ \mbox{\hyperlink{namespacebfl_1_1utils_ae8f8bf6fbbee917d1ff3e2bf6578ea19}{mean\+\_\+quaternion}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&weight, const Eigen\+::\+Matrix\+Base$<$ Derived\+Arg2 $>$ \&quaternion)
\begin{DoxyCompactList}\small\item\em Evaluate the weighted mean of a set of unit quaternions $ q_i $ given a set of weights $ w_i $. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived $>$ }\\Eigen\+::\+Vector\+Xd \mbox{\hyperlink{namespacebfl_1_1utils_af89fbb3248597e49b8fcdf38363b3dcd}{multivariate\+\_\+gaussian\+\_\+log\+\_\+density}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&input, const Eigen\+::\+Ref$<$ const Eigen\+::\+Vector\+Xd $>$ \&mean, const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&covariance)
\begin{DoxyCompactList}\small\item\em Evaluate the logarithm of a multivariate \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} probability density function. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived $>$ }\\Eigen\+::\+Vector\+Xd \mbox{\hyperlink{namespacebfl_1_1utils_a3880bab35c7047e28c08f3f5dfeefd69}{multivariate\+\_\+gaussian\+\_\+log\+\_\+density\+\_\+\+U\+VR}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&input, const Eigen\+::\+Ref$<$ const Eigen\+::\+Vector\+Xd $>$ \&mean, const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&U, const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&V, const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&R)
\begin{DoxyCompactList}\small\item\em Evaluate the logarithm of a multivariate \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} probability density function using the Sherman–\+Morrison–\+Woodbury identity. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived $>$ }\\Eigen\+::\+Vector\+Xd \mbox{\hyperlink{namespacebfl_1_1utils_a21587a9586a3bf80af3346a0df1b876a}{multivariate\+\_\+gaussian\+\_\+density}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&input, const Eigen\+::\+Ref$<$ const Eigen\+::\+Vector\+Xd $>$ \&mean, const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&covariance)
\begin{DoxyCompactList}\small\item\em Evaluate a multivariate \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} probability density function. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Derived $>$ }\\Eigen\+::\+Vector\+Xd \mbox{\hyperlink{namespacebfl_1_1utils_a7016bf3419a1ba23378bedeeb1ff24b7}{multivariate\+\_\+gaussian\+\_\+density\+\_\+\+U\+VR}} (const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&input, const Eigen\+::\+Ref$<$ const Eigen\+::\+Vector\+Xd $>$ \&mean, const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&U, const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&V, const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&R)
\begin{DoxyCompactList}\small\item\em Evaluate the logarithm of a multivariate \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} probability density function using the Sherman–\+Morrison–\+Woodbury formula. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{namespacebfl_1_1utils_a87c09b648fb862a38c24bdf90ad51f97}{throw\+\_\+message}} (const std\+::string \&from\+\_\+where, const std\+::string \&error\+\_\+message, const std\+::string \&data\+\_\+log=\char`\"{}\char`\"{})
\begin{DoxyCompactList}\small\item\em Utility function that returns a pre-\/formatted string for throwing exception reports. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{namespacebfl_1_1utils_aeeda6c71bf3bcd56a07707571c857c57}\label{namespacebfl_1_1utils_aeeda6c71bf3bcd56a07707571c857c57}} 
\index{bfl::utils@{bfl::utils}!enable\_if\_t@{enable\_if\_t}}
\index{enable\_if\_t@{enable\_if\_t}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{enable\_if\_t}{enable\_if\_t}}
{\footnotesize\ttfamily template$<$bool B, class T  = void$>$ \\
using \mbox{\hyperlink{namespacebfl_1_1utils_aeeda6c71bf3bcd56a07707571c857c57}{bfl\+::utils\+::enable\+\_\+if\+\_\+t}} = typedef typename std\+::enable\+\_\+if$<$B,T$>$\+::type}



Helper type \textquotesingle{}enable\+\_\+if\+\_\+t\textquotesingle{}. 

Reference\+: \href{https://en.cppreference.com/w/cpp/types/enable_if\#Helper_types}{\texttt{ https\+://en.\+cppreference.\+com/w/cpp/types/enable\+\_\+if\#\+Helper\+\_\+types}} 

Definition at line 29 of file utils.\+h.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacebfl_1_1utils_a26bbb191de2e28c267c505a1e9ef0951}\label{namespacebfl_1_1utils_a26bbb191de2e28c267c505a1e9ef0951}} 
\index{bfl::utils@{bfl::utils}!diff\_quaternion@{diff\_quaternion}}
\index{diff\_quaternion@{diff\_quaternion}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{diff\_quaternion()}{diff\_quaternion()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Derived\+Arg2 , typename Derived\+Scalar  = typename Derived\+::\+Scalar, typename Derived\+Arg2\+Scalar  = typename Derived\+Arg2\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value \&\&std\+::is\+\_\+same$<$ Derived\+Scalar, Derived\+Arg2\+Scalar $>$\+::value, bool $>$  = true$>$ \\
Eigen\+::\+Matrix$<$Derived\+Scalar, 3, Eigen\+::\+Dynamic$>$ bfl\+::utils\+::diff\+\_\+quaternion (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{quaternion\+\_\+left,  }\item[{const Eigen\+::\+Matrix\+Base$<$ Derived\+Arg2 $>$ \&}]{quaternion\+\_\+right }\end{DoxyParamCaption})}



Evaluate the colwise difference between a set of unit quaternions $ q_i $ and a unit quaternion $ q $. 

The convention adopted for the quaternion representation is $ q = (a, b, c, d) $ where $ a $ is the real part.

Each subtraction takes the form $ r_{i, diff} = 2\,\mathrm{log}(q_{i}\,q^{*})^{\vee} $ expressed in the {\itshape global} frame (i.\+e. the left convention is used).

Taken from Chiella, A. C., Teixeira, B. O., \& Pereira, G. A. (2019). Quaternion-\/\+Based Robust Attitude Estimation Using an Adaptive Unscented Kalman \mbox{\hyperlink{classbfl_1_1Filter}{Filter}}. Sensors, 19(10), 2372.


\begin{DoxyParams}{Parameters}
{\em quaternion\+\_\+left} & a 4 x N matrix each column of which is a unit quaternion \\
\hline
{\em quaternion\+\_\+right} & a 4 x 1 matrix representing a unit quaternion\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a 3 x N matrix where the i-\/th column is the difference between the i-\/th left quaternion and the right quaternion 
\end{DoxyReturn}


Definition at line 227 of file utils.\+h.



References quaternion\+\_\+to\+\_\+rotation\+\_\+vector().



Referenced by bfl\+::sigma\+\_\+point\+::unscented\+\_\+transform().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacebfl_1_1utils_a26bbb191de2e28c267c505a1e9ef0951_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacebfl_1_1utils_a6ca41188b9a6ef3d0d5d5c62df6ed318}\label{namespacebfl_1_1utils_a6ca41188b9a6ef3d0d5d5c62df6ed318}} 
\index{bfl::utils@{bfl::utils}!log\_sum\_exp@{log\_sum\_exp}}
\index{log\_sum\_exp@{log\_sum\_exp}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{log\_sum\_exp()}{log\_sum\_exp()}}
{\footnotesize\ttfamily template$<$typename Derived $>$ \\
double bfl\+::utils\+::log\+\_\+sum\+\_\+exp (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{data }\end{DoxyParamCaption})}



Return the element-\/wise logarithm of the sum of exponentials of the input data. 

To learn more about logsumexp, read \href{https://en.wikipedia.org/wiki/LogSumExp}{\texttt{ https\+://en.\+wikipedia.\+org/wiki/\+Log\+Sum\+Exp}}.


\begin{DoxyParams}{Parameters}
{\em data} & Input numbers as a vector or a matrix.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The element-\/wise logsumexp of the input data. 
\end{DoxyReturn}


Definition at line 72 of file utils.\+h.



Referenced by bfl\+::\+Estimates\+Extraction\+::exponential\+Average(), bfl\+::\+S\+I\+S\+::filtering\+\_\+step(), bfl\+::\+Resampling\+With\+Prior\+::resample(), and bfl\+::\+Estimates\+Extraction\+::weighted\+Average().

\mbox{\Hypertarget{namespacebfl_1_1utils_ad9e9288a23debabef8314ac0d1006e66}\label{namespacebfl_1_1utils_ad9e9288a23debabef8314ac0d1006e66}} 
\index{bfl::utils@{bfl::utils}!make\_unique@{make\_unique}}
\index{make\_unique@{make\_unique}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{make\_unique()}{make\_unique()}}
{\footnotesize\ttfamily template$<$typename T , typename ... Args$>$ \\
std\+::unique\+\_\+ptr$<$T$>$ bfl\+::utils\+::make\+\_\+unique (\begin{DoxyParamCaption}\item[{Args \&\&...}]{args }\end{DoxyParamCaption})}



Constructs an object of type T and wraps it in a std\+::unique\+\_\+ptr. 

Constructs a non-\/array type T. The arguments args are passed to the constructor of T. This overload only participates in overload resolution if T is not an array type. The function is equivalent to\+: unique\+\_\+ptr$<$\+T$>$(new T(std\+::forward$<$\+Args$>$(args)...))

\begin{DoxyNote}{Note}
Unlike std\+::make\+\_\+shared (which has std\+::allocate\+\_\+shared), std\+::make\+\_\+unique does not have an allocator-\/aware counterpart. A hypothetical allocate\+\_\+unique would be required to invent the deleter type D for the unique\+\_\+ptr$<$\+T,\+D$>$ it returns which would contain an allocator object and invoke both destroy and deallocate in its operator().
\end{DoxyNote}
See \href{https://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique}{\texttt{ https\+://en.\+cppreference.\+com/w/cpp/memory/unique\+\_\+ptr/make\+\_\+unique}}. See also\+: \href{https://herbsutter.com/gotw/_102/}{\texttt{ https\+://herbsutter.\+com/gotw/\+\_\+102/}}.


\begin{DoxyParams}{Parameters}
{\em args} & list of arguments with which an instance of T will be constructed.\\
\hline
\end{DoxyParams}
@exeption May throw std\+::bad\+\_\+alloc or any exception thrown by the constructor of T. If an exception is thrown, this function has no effect.

\begin{DoxyReturn}{Returns}
std\+::unique\+\_\+ptr of an instance of type T. 
\end{DoxyReturn}


Definition at line 56 of file utils.\+h.

\mbox{\Hypertarget{namespacebfl_1_1utils_ae8f8bf6fbbee917d1ff3e2bf6578ea19}\label{namespacebfl_1_1utils_ae8f8bf6fbbee917d1ff3e2bf6578ea19}} 
\index{bfl::utils@{bfl::utils}!mean\_quaternion@{mean\_quaternion}}
\index{mean\_quaternion@{mean\_quaternion}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{mean\_quaternion()}{mean\_quaternion()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Derived\+Arg2 , typename Derived\+Scalar  = typename Derived\+::\+Scalar, typename Derived\+Arg2\+Scalar  = typename Derived\+Arg2\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value \&\&std\+::is\+\_\+same$<$ Derived\+Scalar, Derived\+Arg2\+Scalar $>$\+::value, bool $>$  = true$>$ \\
Eigen\+::\+Matrix$<$Derived\+Scalar, 4, 1$>$ bfl\+::utils\+::mean\+\_\+quaternion (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{weight,  }\item[{const Eigen\+::\+Matrix\+Base$<$ Derived\+Arg2 $>$ \&}]{quaternion }\end{DoxyParamCaption})}



Evaluate the weighted mean of a set of unit quaternions $ q_i $ given a set of weights $ w_i $. 

The convention adopted for the quaternion representation is $ q = (a, b, c, d) $ where $ a $ is the real part.

The mean quaternion is evaluated as the eigenvector of the matrix $ M = \sum_i w_i\, q_i\, q_i^{T} $ corresponding to the maximum eigenvalue.

Taken from Chiella, A. C., Teixeira, B. O., \& Pereira, G. A. (2019). Quaternion-\/\+Based Robust Attitude Estimation Using an Adaptive Unscented Kalman \mbox{\hyperlink{classbfl_1_1Filter}{Filter}}. Sensors, 19(10), 2372.


\begin{DoxyParams}{Parameters}
{\em weight} & a N x 1 matrix containing N weights \\
\hline
{\em quaternion} & a 4 x N matrix each column of which is a unit quaternion\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a 4-\/vector representing the weighted mean of the input quaternion set 
\end{DoxyReturn}


Definition at line 271 of file utils.\+h.



Referenced by bfl\+::sigma\+\_\+point\+::unscented\+\_\+transform().

\mbox{\Hypertarget{namespacebfl_1_1utils_a21587a9586a3bf80af3346a0df1b876a}\label{namespacebfl_1_1utils_a21587a9586a3bf80af3346a0df1b876a}} 
\index{bfl::utils@{bfl::utils}!multivariate\_gaussian\_density@{multivariate\_gaussian\_density}}
\index{multivariate\_gaussian\_density@{multivariate\_gaussian\_density}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{multivariate\_gaussian\_density()}{multivariate\_gaussian\_density()}}
{\footnotesize\ttfamily template$<$typename Derived $>$ \\
Eigen\+::\+Vector\+Xd bfl\+::utils\+::multivariate\+\_\+gaussian\+\_\+density (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{input,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Vector\+Xd $>$ \&}]{mean,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&}]{covariance }\end{DoxyParamCaption})}



Evaluate a multivariate \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} probability density function. 


\begin{DoxyParams}{Parameters}
{\em input} & Input representing the argument of the function as a vector or matrix. \\
\hline
{\em mean} & The mean of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a vector. \\
\hline
{\em covariance} & The covariance matrix of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a matrix.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value of the density function evaluated on the input data as a vector. 
\end{DoxyReturn}


Definition at line 419 of file utils.\+h.



References multivariate\+\_\+gaussian\+\_\+log\+\_\+density().



Referenced by bfl\+::\+G\+P\+F\+Correction\+::evaluate\+Proposal(), bfl\+::\+K\+F\+Correction\+::get\+Likelihood(), bfl\+::\+U\+K\+F\+Correction\+::get\+Likelihood(), bfl\+::\+White\+Noise\+Acceleration\+::get\+Transition\+Probability(), and bfl\+::\+Gaussian\+Likelihood\+::likelihood().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacebfl_1_1utils_a21587a9586a3bf80af3346a0df1b876a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacebfl_1_1utils_a7016bf3419a1ba23378bedeeb1ff24b7}\label{namespacebfl_1_1utils_a7016bf3419a1ba23378bedeeb1ff24b7}} 
\index{bfl::utils@{bfl::utils}!multivariate\_gaussian\_density\_UVR@{multivariate\_gaussian\_density\_UVR}}
\index{multivariate\_gaussian\_density\_UVR@{multivariate\_gaussian\_density\_UVR}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{multivariate\_gaussian\_density\_UVR()}{multivariate\_gaussian\_density\_UVR()}}
{\footnotesize\ttfamily template$<$typename Derived $>$ \\
Eigen\+::\+Vector\+Xd bfl\+::utils\+::multivariate\+\_\+gaussian\+\_\+density\+\_\+\+U\+VR (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{input,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Vector\+Xd $>$ \&}]{mean,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&}]{U,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&}]{V,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&}]{R }\end{DoxyParamCaption})}



Evaluate the logarithm of a multivariate \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} probability density function using the Sherman–\+Morrison–\+Woodbury formula. 

It is assumed that the covariance matrix S can be written in the form S = UV + R where R is an invertible block diagonal matrix. Each block R\+\_\+\{i\} is square and has dimension M such that N $\ast$ M is the size of the input for some positive integer N.

This version is much faster than the standard gaussian density evaluation if U.\+cols() $<$$<$ U.\+rows().


\begin{DoxyParams}{Parameters}
{\em input} & Input representing the argument of the function as a vector or matrix. \\
\hline
{\em mean} & The mean of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a vector. \\
\hline
{\em U} & The U factor within the covariance matrix S = UV + R of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a matrix. \\
\hline
{\em V} & The V factor within the covariance matrix S = UV + R of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a matrix. \\
\hline
{\em R} & The R summand within the covariance matrix S = UV + R of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribuion as a matrix. The matrix R has size M $\ast$ (N $\ast$ M) and consists in the concatenation of all the diagonal blocks R\+\_\+\{i\}. If the diagonal blocks are all equal, it is possible to provide a single M $\ast$ M block matrix.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value of the density function evaluated on the input data as a vector. 
\end{DoxyReturn}


Definition at line 447 of file utils.\+h.



References multivariate\+\_\+gaussian\+\_\+log\+\_\+density\+\_\+\+U\+V\+R().



Referenced by bfl\+::\+S\+U\+K\+F\+Correction\+::get\+Likelihood().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacebfl_1_1utils_a7016bf3419a1ba23378bedeeb1ff24b7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacebfl_1_1utils_af89fbb3248597e49b8fcdf38363b3dcd}\label{namespacebfl_1_1utils_af89fbb3248597e49b8fcdf38363b3dcd}} 
\index{bfl::utils@{bfl::utils}!multivariate\_gaussian\_log\_density@{multivariate\_gaussian\_log\_density}}
\index{multivariate\_gaussian\_log\_density@{multivariate\_gaussian\_log\_density}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{multivariate\_gaussian\_log\_density()}{multivariate\_gaussian\_log\_density()}}
{\footnotesize\ttfamily template$<$typename Derived $>$ \\
Eigen\+::\+Vector\+Xd bfl\+::utils\+::multivariate\+\_\+gaussian\+\_\+log\+\_\+density (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{input,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Vector\+Xd $>$ \&}]{mean,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&}]{covariance }\end{DoxyParamCaption})}



Evaluate the logarithm of a multivariate \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} probability density function. 


\begin{DoxyParams}{Parameters}
{\em input} & Input representing the argument of the function as a vector or matrix. \\
\hline
{\em mean} & The mean of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a vector. \\
\hline
{\em covariance} & The covariance matrix of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a matrix.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value of the logarithm of the density function evaluated on the input data as a vector. 
\end{DoxyReturn}


Definition at line 297 of file utils.\+h.



Referenced by multivariate\+\_\+gaussian\+\_\+density().

\mbox{\Hypertarget{namespacebfl_1_1utils_a3880bab35c7047e28c08f3f5dfeefd69}\label{namespacebfl_1_1utils_a3880bab35c7047e28c08f3f5dfeefd69}} 
\index{bfl::utils@{bfl::utils}!multivariate\_gaussian\_log\_density\_UVR@{multivariate\_gaussian\_log\_density\_UVR}}
\index{multivariate\_gaussian\_log\_density\_UVR@{multivariate\_gaussian\_log\_density\_UVR}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{multivariate\_gaussian\_log\_density\_UVR()}{multivariate\_gaussian\_log\_density\_UVR()}}
{\footnotesize\ttfamily template$<$typename Derived $>$ \\
Eigen\+::\+Vector\+Xd bfl\+::utils\+::multivariate\+\_\+gaussian\+\_\+log\+\_\+density\+\_\+\+U\+VR (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{input,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Vector\+Xd $>$ \&}]{mean,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&}]{U,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&}]{V,  }\item[{const Eigen\+::\+Ref$<$ const Eigen\+::\+Matrix\+Xd $>$ \&}]{R }\end{DoxyParamCaption})}



Evaluate the logarithm of a multivariate \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} probability density function using the Sherman–\+Morrison–\+Woodbury identity. 

It is assumed that the covariance matrix S can be written in the form S = UV + R where R is an invertible block diagonal matrix. Each block R\+\_\+\{i\} is square and has dimension M such that N $\ast$ M is the size of the input for some positive integer N.

This version is much faster than the standard gaussian logarithm density evaluation if U.\+cols() $<$$<$ U.\+rows().


\begin{DoxyParams}{Parameters}
{\em input} & Input representing the argument of the function as a vector or matrix. \\
\hline
{\em mean} & The mean of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a vector. \\
\hline
{\em U} & The U factor within the covariance matrix S = UV + R of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a matrix. \\
\hline
{\em V} & The V factor within the covariance matrix S = UV + R of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribution as a matrix. \\
\hline
{\em R} & The R summand within the covariance matrix S = UV + R of the associated \mbox{\hyperlink{classbfl_1_1Gaussian}{Gaussian}} distribuion as a matrix. The matrix R has size M $\ast$ (N $\ast$ M) and consists in the concatenation of all the diagonal blocks R\+\_\+\{i\}. If the diagonal blocks are all equal, it is possible to provide a single M $\ast$ M block matrix.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value of the logarithm of the density function evaluated on the input data as a vector. 
\end{DoxyReturn}


Definition at line 331 of file utils.\+h.



Referenced by multivariate\+\_\+gaussian\+\_\+density\+\_\+\+U\+V\+R().

\mbox{\Hypertarget{namespacebfl_1_1utils_a294bdf526be6ef1c5bad59e737f2af63}\label{namespacebfl_1_1utils_a294bdf526be6ef1c5bad59e737f2af63}} 
\index{bfl::utils@{bfl::utils}!quaternion\_to\_rotation\_vector@{quaternion\_to\_rotation\_vector}}
\index{quaternion\_to\_rotation\_vector@{quaternion\_to\_rotation\_vector}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{quaternion\_to\_rotation\_vector()}{quaternion\_to\_rotation\_vector()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Derived\+Scalar  = typename Derived\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value, bool $>$  = true$>$ \\
Eigen\+::\+Matrix$<$Derived\+Scalar, 3, Eigen\+::\+Dynamic$>$ bfl\+::utils\+::quaternion\+\_\+to\+\_\+rotation\+\_\+vector (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{quaternion }\end{DoxyParamCaption})}



Convert a matrix of unit quaternions $ q_i $ to their rotation vector representation $ r_i \in \mathbb{R}^{3} $ in the tangent space at the identity. 

The convention adopted for the quaternion representation is $ q = (a, b, c, d) $ where $ a $ is the real part.

Taken from Chiella, A. C., Teixeira, B. O., \& Pereira, G. A. (2019). Quaternion-\/\+Based Robust Attitude Estimation Using an Adaptive Unscented Kalman \mbox{\hyperlink{classbfl_1_1Filter}{Filter}}. Sensors, 19(10), 2372.


\begin{DoxyParams}{Parameters}
{\em quaternion} & a 4 x N matrix each column of which is a unit quaternion\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a 3 x N matrix each column of which is the rotation vector associated to the input unit quaternion 
\end{DoxyReturn}


Definition at line 99 of file utils.\+h.



Referenced by diff\+\_\+quaternion().

\mbox{\Hypertarget{namespacebfl_1_1utils_af901548c98d811c2b176e1d9b02aabb3}\label{namespacebfl_1_1utils_af901548c98d811c2b176e1d9b02aabb3}} 
\index{bfl::utils@{bfl::utils}!rotation\_vector\_to\_quaternion@{rotation\_vector\_to\_quaternion}}
\index{rotation\_vector\_to\_quaternion@{rotation\_vector\_to\_quaternion}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{rotation\_vector\_to\_quaternion()}{rotation\_vector\_to\_quaternion()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Derived\+Scalar  = typename Derived\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value, bool $>$  = true$>$ \\
Eigen\+::\+Matrix$<$Derived\+Scalar, 4, Eigen\+::\+Dynamic$>$ bfl\+::utils\+::rotation\+\_\+vector\+\_\+to\+\_\+quaternion (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{rotation\+\_\+vector }\end{DoxyParamCaption})}



Convert a matrix of rotation vectors $ r_i \in \mathbb{R}^{3} $ in the tangent space at the identity to their unitary quaternionic representation $ q_i $. 

The convention adopted for the quaternion representation is $ q = (a, b, c, d) $ where $ a $ is the real part.

Taken from Chiella, A. C., Teixeira, B. O., \& Pereira, G. A. (2019). Quaternion-\/\+Based Robust Attitude Estimation Using an Adaptive Unscented Kalman \mbox{\hyperlink{classbfl_1_1Filter}{Filter}}. Sensors, 19(10), 2372.


\begin{DoxyParams}{Parameters}
{\em rotation\+\_\+vector} & a 3 x N matrix each column of which is a rotation vector\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a 4 x N matrix each column of which is the unit quaternion associated to the input rotation vector 
\end{DoxyReturn}


Definition at line 139 of file utils.\+h.



Referenced by sum\+\_\+quaternion\+\_\+rotation\+\_\+vector().

\mbox{\Hypertarget{namespacebfl_1_1utils_ab1ca09c6f5d699242615c8dbc89fa2e0}\label{namespacebfl_1_1utils_ab1ca09c6f5d699242615c8dbc89fa2e0}} 
\index{bfl::utils@{bfl::utils}!sum\_quaternion\_rotation\_vector@{sum\_quaternion\_rotation\_vector}}
\index{sum\_quaternion\_rotation\_vector@{sum\_quaternion\_rotation\_vector}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{sum\_quaternion\_rotation\_vector()}{sum\_quaternion\_rotation\_vector()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Derived\+Arg2 , typename Derived\+Scalar  = typename Derived\+::\+Scalar, typename Derived\+Arg2\+Scalar  = typename Derived\+Arg2\+::\+Scalar, bfl\+::utils\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+floating\+\_\+point$<$ Derived\+Scalar $>$\+::value \&\&std\+::is\+\_\+same$<$ Derived\+Scalar, Derived\+Arg2\+Scalar $>$\+::value, bool $>$  = true$>$ \\
Eigen\+::\+Matrix$<$Derived\+Scalar, 4, Eigen\+::\+Dynamic$>$ bfl\+::utils\+::sum\+\_\+quaternion\+\_\+rotation\+\_\+vector (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Base$<$ Derived $>$ \&}]{quaternion,  }\item[{const Eigen\+::\+Matrix\+Base$<$ Derived\+Arg2 $>$ \&}]{rotation\+\_\+vector }\end{DoxyParamCaption})}



Evaluate the colwise sum between a unit quaternion $ q $ and a set of rotation vectors $ r_i \in \mathbb{R}^{3} $ in the tangent space at the identity. 

The convention adopted for the quaternion representation is $ q = (a, b, c, d) $ where $ a $ is the real part.

Each summation takes the form $ q_{i, sum} = \mathrm{exp}(\hat{\frac{r_i}{2}}) \, q $ where $ r_i = \omega t \in \mathbb{R}^{3} $ is the tangent increment expressed in the {\itshape global} frame (i.\+e. the left convention is used.)

Taken from Chiella, A. C., Teixeira, B. O., \& Pereira, G. A. (2019). Quaternion-\/\+Based Robust Attitude Estimation Using an Adaptive Unscented Kalman \mbox{\hyperlink{classbfl_1_1Filter}{Filter}}. Sensors, 19(10), 2372.


\begin{DoxyParams}{Parameters}
{\em quaternion} & a 4 x 1 matrix representing a unit quaternion \\
\hline
{\em rotation\+\_\+vector} & a 3 x N matrix each column of which is a rotation vector\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a 4 x N matrix where the i-\/th column is the sum between the unit quaternion and the i-\/th rotation vector 
\end{DoxyReturn}


Definition at line 184 of file utils.\+h.



References rotation\+\_\+vector\+\_\+to\+\_\+quaternion().



Referenced by bfl\+::sigma\+\_\+point\+::sigma\+\_\+point().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacebfl_1_1utils_ab1ca09c6f5d699242615c8dbc89fa2e0_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacebfl_1_1utils_a87c09b648fb862a38c24bdf90ad51f97}\label{namespacebfl_1_1utils_a87c09b648fb862a38c24bdf90ad51f97}} 
\index{bfl::utils@{bfl::utils}!throw\_message@{throw\_message}}
\index{throw\_message@{throw\_message}!bfl::utils@{bfl::utils}}
\doxysubsubsection{\texorpdfstring{throw\_message()}{throw\_message()}}
{\footnotesize\ttfamily std\+::string bfl\+::utils\+::throw\+\_\+message (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{from\+\_\+where,  }\item[{const std\+::string \&}]{error\+\_\+message,  }\item[{const std\+::string \&}]{data\+\_\+log = {\ttfamily \char`\"{}\char`\"{}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Utility function that returns a pre-\/formatted string for throwing exception reports. 

Carefully read the input parameter descriptions for string styling format.


\begin{DoxyParams}{Parameters}
{\em from\+\_\+where} & Name of the throwing function with namespace. Example\+: \char`\"{}\+M\+Y\+C\+L\+A\+S\+S\+::\+M\+E\+T\+H\+O\+D\char`\"{}, \char`\"{}\+N\+A\+M\+E\+S\+P\+A\+C\+E\+::\+F\+U\+N\+C\+T\+I\+O\+N\char`\"{}. \\
\hline
{\em error\+\_\+message} & Error message about the throwing exception. Example\+: \char`\"{}\+Index out of bound.\char`\"{} \\
\hline
{\em data\+\_\+log} & Optional additional message reporting data causing the throwing exception. Example\+: \char`\"{}\+Provided index\+: 3. Index bound\+: 2\char`\"{}.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The throwing exeption report or \char`\"{}\+U\+T\+I\+L\+S\+::\+T\+H\+R\+O\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E\+::\+E\+M\+P\+T\+Y\+\_\+\+T\+H\+R\+O\+W\+\_\+\+R\+E\+P\+O\+R\+T\char`\"{} if from\+\_\+where or error\+\_\+message are empty. 
\end{DoxyReturn}


Definition at line 558 of file utils.\+h.

